{% extends "debsso-base.html" %}
{% load url from future %}

{% block content %}

<h1 class="announce">Debian Single Sign On</h1>

{% if dacs_user %}
Logged in as <b>{{dacs_user}}</b>.

<form method="GET" action="/cgi-bin/dacs/dacs_signout">
  <button name="logout">Logout...</button>
</form>

{% else %}
  <form name="loginForm" method="POST" action="/cgi-bin/dacs/dacs_authenticate" autocomplete="off">
    <label for="USERNAME"><b>Username:</b><span class="form_required" title="Needed argument">*</span></label>
    <br />
    <input name="USERNAME" type="text" id="USERNAME" size="30" ><!-- default empty -->
    <br />
    <div class="description">Please enter your Debian Username.</div>
    <br />
    <label for="PASSWORD"><b>Password:</b><span class="form_required" title="Needed argument">*</span></label>
    <br>
    <input name="PASSWORD" type="password" id="PASSWORD" size="30">
    <br>
    <div class="description">Please enter your password.</div>
    <br>
    <input type="submit" class="highlight" value="Login...">
    <input type="hidden" name="DACS_BROWSER" value="1">
    <input type="hidden" name="ENABLE_AUTH_HANDLERS" value="1">
    <input type="hidden" name="DACS_JURISDICTION" value="DEBIAN">
{% comment %}
% if( $c->stash->{DACS_ERROR_URL} ) {
    <input type="hidden" name="DACS_AUTH_SUCCESS_HANDLER" value="DACS_ERROR_URL">
    <input type="hidden" name="DACS_ERROR_URL" value="<% $c->stash->{DACS_ERROR_URL} %>">
% }
{% endcomment %}
    <p>You can set your SSO password on <a href="https://db.debian.org/">https://db.debian.org/</a>. Note that it is <em>different</em> than your db.debian.org password.</p>
  </form>
{% endif %}


<pre>
{% for k, v in get_vars %}
GET {{k}} {{v}}
{% endfor %}
{% for k, v in env_vars %}
ENV {{k}} {{v}}
{% endfor %}
</pre>

{% endblock %}
